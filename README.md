# RUN THE APP AND visit http://localhost:8080/

1. git clone this repository
2. npm install
3. npm run start
4. visit http://localhost:8080/

# Fullstack Reservation App Coding Challenge

This coding challenge involves building a fullstack web app using React (frontend) and Node (backend).

This repository consists of the following files and folders:

1. `package.json`
2. `db/restaurant_reservation_schema_init.sql` (for restaurant and reservation tables)
3. `db/restaurant_reservation_seed_data.sql` (sample data for restaurant and reservation)
4. `app-screenshots` (design inspiration)
5. `README.html`
6. `README.md`
7. `server.js`

# Timeline

One week to complete this

# Tips

Make sure Postgres is turned on

# Deployment

Since Heroku is no longer free, you can choose between using Render or Netlify for deployment.

- [Render](https://render.com/)
- [Netlify](https://www.netlify.com/)

# Technical Requirements - Part 1

## Adding Validation

You may use any third-party libraries or packages for user sign-up.

### User Table

- **id**: Sequential, generated by the database
- **username**: String, cannot be null
- **email**: String, cannot be null
- **password**: String, cannot be null

### User Reservation Table

- **id**: Sequential, generated by the database
- **restaurant_id**: References the restaurant ID
- **reservation_id**: References the reservation ID

Ensure that all user inputs are validated and sanitized. For example, when handling the username input (both on the frontend and backend), special characters should be prohibited. If a user attempts to enter special characters on the frontend, display the message “Special characters are not allowed.” Similarly, if a user uses Postman to send a request to the backend with special characters, the response should also be “Special characters are not allowed.”

You may consider using validation libraries such as Joi or Validator, but you are free to create your own validation logic or use any third-party libraries.

**Note:** All input should be thoroughly validated and sanitized. Passwords must meet the following criteria: at least 8 characters in length, containing at least one special character, one number, and one uppercase letter.

# IMPORTANT:

- The database must be PostgreSQL.
- You can use any query builder or ORM of your choice, such as Knex, Sequelize, or TypeORM.
- **Folder Structure:** Design and organize the folder structure based on best practices and your judgment for optimal organization and maintainability.

### API for Frontend and Backend User

| Method | Endpoint     | Description         | Example JSON Body Payload |
| ------ | ------------ | ------------------- | ------------------------- |
| GET    | /sign-up     | sign user up        |                           |
| POST   | /login       | login user in       |                           |
| PUT    | /update-user | update user profile |                           |
| DELETE | /delete-user | delete user profile |                           |

You are allowed to use any encryption library for encrypting and decrypting user passwords.

Additionally, you are to make a decision between using JWT or sessions to keep track of user authentication

### App Pages User

Your Reservation App should have the following pages

### Sign Up (`/sign-up`)

- **Create a new account** by providing required details.
- **Username**: Must be unique and non-null.
- **Email**: Must be valid and non-null.
- **Password**: Must be at least 8 characters long and include one special character, one number, and one uppercase letter.
- **Confirm password**: Ensure it matches the original password.
- **Receive a confirmation email** to verify the account.
- **Handle errors**: Provide clear messages for invalid input or existing accounts.

### POST `/login`

- **Authenticate users** by providing their username/email and password.
- **Check credentials**: Verify that the username/email and password match a registered account.
- **Return a token** or session ID upon successful login.
- **Handle errors**: Provide clear messages for incorrect credentials or inactive accounts.
- Lock the account for 1 hour if 5 failed attempts (Bonus)

### PUT `/update-user`

- **Update user profile** with new details.
- **Required fields**: Allow updating username, email, and password
- **Validate input**: Ensure all new details meet the required criteria.
- **Handle errors**: Provide messages for invalid input or attempts to update non-existent profiles.

### DELETE `/delete-user`

- **Delete user profile** from the system.
- **Authenticate the request**: Ensure the user requesting deletion is logged in.
- **Handle dependencies**: Ensure that associated data (e.g., reservations) is managed as required.
- **Confirm deletion**: Provide a confirmation message or status upon successful deletion.
- **Handle errors**: Provide messages for unauthorized access or attempts to delete non-existent profiles.

# Navbar

Ensure the implementation of a fully functional Navbar with the following features:

- **Dynamic State Handling**: Toggle between states for authenticated and unauthenticated users.
  - **Authenticated Users**: Display relevant navigation options such as profile, settings, and logout.
  - **Unauthenticated Users**: Show options like login, sign-up, and general site navigation.
- **Consistent Styling**: Maintain a consistent design and layout that aligns with the overall application theme.
- **Responsive Design**: Ensure the Navbar is responsive and user-friendly across different devices and screen sizes.

# Technical Requirement part 2

Create a client for a Restaurant Reservations application. Users are able to:

- Add Restaurants
- Search Restaurants
- Create and Update Reservations
- List all Reservations
- View Details for Individual Reservations or Restaurants

)

**IMPORTANT MUST READ:**

Users can search for any restaurant using the API, but only registered users are allowed to make reservations.

- Ensure that all reservation-related APIs are secured and protected to prevent unauthorized access.

Use your own experience and judgment to adhere to best practices.

### API for Frontend and Backend Restaurant and Reservation

Use the details and endpoints of the API below to accomplish the Reservation App functionality. This API accepts and returns JSON payloads.

| Method | Endpoint                          | Description                                                                                                                                                                                             | Example JSON Body Payload                                                                                                                                                                                                                                      |
| ------ | --------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| GET    | /api/restaurants                  | List restaurants (empty query string = all restaurants)                                                                                                                                                 |                                                                                                                                                                                                                                                                |
| GET    | /api/restaurants/:id              | Retreive a restaurant by ID                                                                                                                                                                             |                                                                                                                                                                                                                                                                |
| GET    | /api/restaurants/:id/reservations | Retrieve all reservations at a restaurant                                                                                                                                                               |                                                                                                                                                                                                                                                                |
| POST   | /api/restaurants                  | Create a restaurant                                                                                                                                                                                     | { "name": "Subway", "description": "Build-your-own sandwich chain", "phoneNumber": "0001112222", "openingTime": "10:00:00", "closingTime": "22:00:00", "price": "$", "cuisine": "American", "location": "New York City", "diningRestriction": "Takeout Only" } |
| PATCH  | /api/restaurants/:id              | Update an existing Restaurant. The payload for updating a restaurant is a partial version of the 'Create a Restaurant' payload where all fields are optional.                                           | { "description": "SUBWAY -- NOW WITH PIZZA", "phoneNumber": "7188212995" }                                                                                                                                                                                     |
| DELETE | /api/restaurants/:id              | Delete a restaurant                                                                                                                                                                                     |                                                                                                                                                                                                                                                                |
| GET    | /api/reservations                 | Retrieve all reservations                                                                                                                                                                               |                                                                                                                                                                                                                                                                |
| GET    | /api/reservations/:id             | Retrieve a reservation by ID                                                                                                                                                                            |                                                                                                                                                                                                                                                                |
| POST   | /api/reservations/                | Create a reservation. restaurantId must be the id of a valid Restaurant                                                                                                                                 | { "firstName": "Joe", "lastName": "Smith", "phoneNumber": "9098087777", "email": "joesmith@pursuit.com", "time": "2022-06-01 19:00:00", "numGuests": "2", "restaurantId": "470d7797-8ece-4133-9885-c5651fd90625" }                                             |
| PATCH  | /api/reservations/:id             | Update an existing Reservation. The payload for updating a restaurant is a partial version of the 'Create a Reservation' payload where all fields are optional and you may not change the restaurantId. | { "time": "2022-06-01 19:30:00", "numGuests": "4" }                                                                                                                                                                                                            |
| DELETE | /api/reservations/:id             | Delete a reservation                                                                                                                                                                                    |                                                                                                                                                                                                                                                                |

### App Pages/Views

Your Reservation App should have the following pages

### Search Restaurants (`/restaurants`)

- User can search restaurants (text search bar)
- User can filter restaurants by the filters defined in the API (pre-built filters: cuisine, location, price, Takeout/Delivery)
- If no filters are applied, User can view all Restaurants

### Create Restaurant (`/newRestaurant`)

- User can fill out a form to create a restaurant based on the fields defined in the API

### Single Restaurant (`/restaurants/:id`)

- User can view all details about the restaurant (Name, Description, Location, Price, Hours...)
- User can create a reservation for any time in the future when the restaurant is open

### All Reservations (`/reservations`)

- User can view all reservations

### Single Reservation (`/reservations/:id`)

- User can view active reservation details
- Additional Challenge: User can update existing reservations

# Styling:

- You may use any 3rd-party libraries or packages for functionality or styling.

# Schema

- Restaurant Fields:
  - Required: name, description, price, cuisine, location, openingTime, closingTime
  - Optional: phoneNumber, diningRestriction ('Takeout Only', 'Delivery Only'), tables
- Reservation Fields:
  - Required: firstName, lastName, phoneNumber, time, numGuests
  - Optional: email

# Extra notes

make sure you implement the following

- .gitignore
- .env

# **Summary**

Please provide documentation on the following aspects:

1. **Thought Process**
   - Describe the reasoning behind your decisions and the rationale for the approaches you chose.
2. **Design Process**
   - Include low-fidelity mockups to illustrate your initial design concepts and layout ideas.

# **Submission**

Please submit the GitHub links for both the frontend and backend, as well as the deployment links for both the frontend and backend.

- [Survey](https://docs.google.com/forms/d/1VVXg7gkut25oAiXRIvwuKolIctP3edIua1lqbS0ZwDs/edit)

# BONUS (Optional)

1. Implement testing for both frontend and backend
